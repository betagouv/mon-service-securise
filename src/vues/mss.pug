extends ./base
include fragments/composantSvelte
include fragments/donneesPartagees

block variables

block page
  - const UI_KIT_VERSION = '1.43.0';
  block scripts
    script(src='/statique/bibliotheques/axios-1.0.0.min.js')
    script(src='/statique/bibliotheques/jquery-3.6.0.min.js')
    include csrf.pug
    script(src=`https://lab-anssi-ui-kit-prod-s3-assets.cellar-c2.services.clever-cloud.com/${UI_KIT_VERSION}/lab-anssi-ui-kit.iife.js` nonce=nonce defer)
    +composantSvelte('entete.js')

  block styles
    link(href='/statique/assets/styles/palette.css', rel='stylesheet')
    link(href='/statique/assets/styles/fonts.css', rel='stylesheet')
    link(href='/statique/assets/styles/bouton.css', rel='stylesheet')
    link(href='/statique/assets/styles/lien.css', rel='stylesheet')
    link(href='/statique/assets/styles/mss.css', rel='stylesheet')
    link(href='/statique/assets/styles/entete.css', rel='stylesheet')
    link(href='/statique/assets/styles/entete.responsive.css', rel='stylesheet')
    link(href='/statique/assets/styles/piedPage.css', rel='stylesheet')
    link(href='/statique/assets/styles/piedPage.responsive.css', rel='stylesheet')
    link(href=`https://lab-anssi-ui-kit-prod-s3-assets.cellar-c2.services.clever-cloud.com/${UI_KIT_VERSION}/dsfr-variables.css`, rel='stylesheet', nonce=nonce)
    link(href=`https://lab-anssi-ui-kit-prod-s3-assets.cellar-c2.services.clever-cloud.com/${UI_KIT_VERSION}/lab-anssi-theme.mss.css`, rel="stylesheet", nonce=nonce)
    +feuilleDeStyleSvelte()

  title MonServiceS√©curis√©

  block header
    header(class=(classeDuHeader))
      .header-gauche.fr-header__brand
        block header-gauche
          .bloc-marque
            .marianne
            .republique-francaise R√âPUBLIQUE<br>FRAN√áAISE
            .devise
          a.logo-anssi(href='https://cyber.gouv.fr')
          a.logo-mss(href='/')

      .header-droit
        if featureFlags.avecBandeauMSC
          lab-anssi-bouton-suite-cyber-navigation(sourceUtm="MonServiceS√©curis√©")
        block header-droit
          button(aria-label='Menu sandwich').sandwich
          nav
            .bouton-fermer Fermer
            block navigation
    if avertissementMaintenance
      .banniere-maintenance
        img(src="/statique/assets/images/icone_danger.svg" alt="")
        p
          -
            const dateDuJour = new Date()
            dateDuJour.setHours(0, 0, 0, 0);
            const diffDate = new Date(avertissementMaintenance.jour) - dateDuJour
            const diffJour = Math.round(diffDate   / (1000 * 60 * 60 * 24));
            const diffFormatee = new Intl.RelativeTimeFormat('fr', { numeric: 'auto' }).format(diffJour, 'day');
            const jourFormate = new Intl.DateTimeFormat('fr', { dateStyle: "full" }).format(new Date(avertissementMaintenance.jour));
          span Une maintenance est pr√©vue #{diffFormatee} (#{jourFormate}) sur MonServiceS√©curis√©, #{avertissementMaintenance.heure}.
          br
          span La plateforme sera inaccessible. Nous nous excusons pour la g√™ne occasion√©e.


  block session

  block visite-guidee

  block bandeau-promotion-msc

  block navigation-site-vitrine

  block tiroir

  block centre-aide
    lab-anssi-centre-aide(nomService="MonServiceS√©curis√©" liens=JSON.stringify([
      { texte: 'üí¨ Nous contacter par chat', href: 'https://aide.monservicesecurise.cyber.gouv.fr/' },
      { texte: "üë©‚Äçüíª Participer √† un webinaire", href: 'https://calendly.com/fabien-giraud/presentation-de-monservicesecurise-1' },
      { texte: 'üôå Consulter la F.A.Q.', href: 'https://aide.monservicesecurise.cyber.gouv.fr/' },
    ]))

  block bandeau-titre

  main
    block main

  footer
    block footer-bandeau-mss
      .bandeau-mss.marges-fixes
        .bloc-france
          .marianne
          .republique-francaise R√âPUBLIQUE <br/> FRAN√áAISE
          .devise
        .infos-mss
          div.
            MonServiceS√©curis√© aide les entit√©s publiques √† s√©curiser et homologuer leurs services
            publics num√©riques : site web, applications mobiles, API.
          div.
            Il est d√©velopp√© par l'#[a.nouvel-onglet(href='https://cyber.gouv.fr', target='_blank', rel='noopener') Agence nationale de la s√©curit√© des syst√®mes d'information],
            en lien avec #[a.nouvel-onglet(href='https://beta.gouv.fr', target='_blank', rel='noopener') BetaGouv] et la
            #[a.nouvel-onglet(href='https://www.numerique.gouv.fr/dinum', target='_blank', rel='noopener') Direction interminist√©rielle du num√©rique].
          .liens
            a.nouvel-onglet(href = 'https://www.legifrance.gouv.fr', target = '_blank', rel = 'noopener') legifrance.gouv.fr
            a.nouvel-onglet(href = 'https://www.gouvernement.fr', target = '_blank', rel = 'noopener') gouvernement.fr
            a.nouvel-onglet(href = 'https://www.service-public.fr', target = '_blank', rel = 'noopener') service-public.fr
            a.nouvel-onglet(href = 'https://www.data.gouv.fr', target = '_blank', rel = 'noopener') data.gouv.fr
      .separateur
    nav.marges-fixes
      ul
        li
          a(href = '/aPropos') √Ä propos
        li
          a(href = '/mentionsLegales') Mentions l√©gales
        li
          a(href = '/confidentialite') Politique de confidentialit√©
        li
          a(href = '/cgu') Conditions g√©n√©rales
        li
          a(href = '/statistiques') Statistiques d'utilisation
        li
          a(href = '/securite') S√©curit√©
        li
          a(href = '/accessibilite') Accessibilit√© : non conforme

  script(type = 'module', src = '/statique/entete.js')
